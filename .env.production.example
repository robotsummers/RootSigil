# RootSigil production example (Base mainnet + CDP facilitator)
#
# Copy to .env on the production host and fill in secrets.

# ---- Server ----
PORT=8080
BASE_URL=https://api.example.com
ROOTSIGIL_HOSTNAME=api.example.com
HTTP_JSON_BODY_LIMIT_BYTES=41943040
TRUST_PROXY=true
VERSION=v0.1.0

# ---- Storage ----
# Use container paths when running via docker-compose.prod.yml
SQLITE_PATH=/data/rootsigil.sqlite
ARTIFACT_STORAGE_DIR=/artifacts
ARTIFACT_RETENTION_HOURS=24

# Intake limits (raw bytes, not base64 size)
INTAKE_MAX_FILES=5000
INTAKE_MAX_TOTAL_BYTES=20971520
INTAKE_MAX_SINGLE_FILE_BYTES=2097152

# ---- Policy ----
DEFAULT_POLICY_VERSION=2026-02-17.static.v1
POLICY_FILE=./policy/policy.default.json

# ---- Issuer ----
ISSUER_ID=rootsigil-prod
ISSUER_ED25519_PRIVATE_KEY_B64=REPLACE_ME
ISSUER_ED25519_PUBLIC_KEY_B64=REPLACE_ME

# ---- Rate limiting ----
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# ---- Git intake hardening ----
GIT_ALLOWED_HOSTS=github.com
GIT_TIMEOUT_MS=15000

# ---- Roles / worker ----
ROOTSIGIL_ROLE=api
SCAN_FORCE_ASYNC=true
WORKER_POLL_MS=500
WORKER_LEASE_MS=120000
WORKER_CONCURRENCY=2

# ---- x402 payments ----
X402_ENABLED=true
X402_PAYWALL_SCAN=true
X402_PAYWALL_ATTEST=true
X402_PRICE_SCAN=$0.01
X402_PRICE_ATTEST=$0.01
X402_FACILITATOR_MODE=cdp_mainnet
X402_FACILITATOR_URL=https://api.cdp.coinbase.com/platform/v2/x402
X402_NETWORK=eip155:8453
X402_ASSET=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
X402_PAYTO=0x4525d5E422dD75b8e062565EA28E9efe19eE5Dae

# CDP API keys (required for CDP mainnet facilitator)
CDP_API_KEY_ID=REPLACE_ME
CDP_API_KEY_SECRET=REPLACE_ME

# ---- Idempotency ----
IDEMPOTENCY_TTL_MS=3600000
